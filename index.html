<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Daniel Ledesma and Eitan Sahnovich (website template by Ryan Tsang)" />
  <title>A Game Bundle: Two Game Package</title>
  <link rel="stylesheet" href="assets/github-markdown-light.css" />
  <link rel="stylesheet" href="assets/style-customization.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<article class="markdown-body">
<header id="title-block-header">
  <h1 class="title">A Game Bundle: Two Game Package</h1>
  <p class="author"><strong>Daniel Ledesma and Eitan Sahnovich</strong> (website template by Ryan Tsang)</p>
  <p class="date"><em>EEC172 SQ24</em></p>
  <div class="abstract">
    <h2>Description</h2>
    <p>The game bundle is a device that contains two pre-loaded games and a menu interface. The CC3200 is used as the general processor of this device to interpret the multiple forms of inputs from the user. AWS IoT was used to create a device shadow to store the high scores. The menu is interfaced using an IR remote to make decisions across the various menu screens. Pressing two is used to move the cursor up with five to move the cursor down. Pressing mute is the equivalent of an enter key and is used to make the decision once the cursor was properly navigated. The maze game if selected will give the open to choose an easy, medium, or hard maze. After the user has selected their difficulty the maze is loaded and the user can attempt to navigate the maze by tilting the board in the appropriate direction. The score is determined by subtracting the number of collisions from 800. If the user reaches the end zone they receive a win screen with their score. If this is a highscore then the shadow is updated with this score. The user loses if the amount of collisions surpasses 800 and is given a losing screen. The user is then navigated back to the menu screen. If navigating to the high score screen then the user will be shown the high score for each game. If navigating to the hangman game, the hangman game is loaded with the choice of 5 different words labeled as numbers for the user to guess in the game. The max word is 5 letters. The score is determined by counting the length of the word and assigning a max score for the longest word of 5 letters at 800 and 100 points less for each letter shorter than 5. If the stickman is drawn then the user loses with a score of 0 and is shown the lose screen. If the user wins they are shown the win screen with their score and if it is a highscore, the shadow is updated. </p>
    <p>Our source code can be found <a href="https://github.com/dledesma2000/EEC172_FinalProject.git">here</a>.</p>
<h2>Screenshots</h2>
<div style="display:flex;flex-wrap:wrap;justify-content:space-evenly;">
  <div style="flex:1 0 30%;max-width:30%;margin:10px;">
    <div class="fig">
      <img src="./media/main_menu.jpg" style="width:100%;height:auto;" />
      <span class="caption">Main Menu</span>
    </div>
  </div>
  <div style="flex:1 0 30%;max-width:30%;margin:10px;">
    <div class="fig">
      <img src="./media/maze_difficulty.jpg" style="width:100%;height:auto;" />
      <span class="caption">Maze Difficulty</span>
    </div>
  </div>
  <div style="flex:1 0 30%;max-width:30%;margin:10px;">
    <div class="fig">
      <img src="./media/easyMaze.jpg" style="width:100%;height:auto;" />
      <span class="caption">Easy Maze</span>
    </div>
  </div>
  <div style="flex:1 0 30%;max-width:30%;margin:10px;">
    <div class="fig">
      <img src="./media/mediumMaze.jpg" style="width:100%;height:auto;" />
      <span class="caption">Medium Maze</span>
    </div>
  </div>
  <div style="flex:1 0 30%;max-width:30%;margin:10px;">
    <div class="fig">
      <img src="./media/hardMaze.jpg" style="width:100%;height:auto;" />
      <span class="caption">Hard Maze</span>
    </div>
  </div>
  <div style="flex:1 0 30%;max-width:30%;margin:10px;">
    <div class="fig">
      <img src="./media/WinLoseScreen.jpg" style="width:100%;height:auto;" />
      <span class="caption">Win/Lose Screen</span>
    </div>
  </div>
  <div style="flex:1 0 30%;max-width:30%;margin:10px;">
    <div class="fig">
      <img src="./media/hangman.jpg" style="width:100%;height:auto;" />
      <span class="caption">Hangman</span>
    </div>
  </div>
</div>
    <h2>Video Demo</h2>
    <div style="text-align:center;margin:auto;max-width:560px">
      <div style="padding-bottom:56.25%;position:relative;height:0;">
        <iframe style="left:0;top:0;width:100%;height:100%;position:absolute;" width="560" height="315" src="https://www.youtube.com/embed/_6uB2nkWJQg" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      </div>
    </div>
  </div>
</header>
<nav id="TOC" role="doc-toc">
  <h2 id="toc-title">Table of Contents</h2>
  <ul>
    <li><a href="#similar-products" id="toc-similar-products">Similar Products</a></li>
    <li><a href="#design" id="toc-design">Design</a>
      <ul>
        <li><a href="#system-architecture" id="toc-system-architecture">System Architecture</a></li>
        <li><a href="#functional-specification" id="toc-functional-specification">Functional Specification</a></li>
      </ul>
    </li>
    <li><a href="#challenges" id="toc-challenges">Challenges</a></li>
    <li><a href="#future-work" id="toc-future-work">Future Work</a></li>
    <li><a href="#finalized-bom" id="toc-finalized-bom">Finalized BOM</a></li>
  </ul>
</nav>

<!-- EDIT METADATA ABOVE FOR CONTENTS TO APPEAR ABOVE THE TABLE OF CONTENTS -->

<!-- ALL CONTENT THAT FOLLOWS WILL APPEAR IN AND AFTER THE TABLE OF CONTENTS -->

<h1 id="similar-products">Similar Products</h1>

<div style="display:flex;justify-content:space-between;">
  <div style="flex-basis:45%;">
    <h2><a href="https://atari.com/products/atari-vcs-onyx-all-in">VCS All-In Bundle</a></h2>
    <div class="fig" style="text-align:center;margin:auto;">
      <img src="./media/vcs.jfif" style="width:100%;height:auto;" />
      <span class="caption">VCS All-In Bundle Image</span>
    </div>
    <ul>
      <li>100 Atari Games preloaded</li>
      <li>Controlled by controller or joystick</li>
    </ul>
  </div>
  <div style="flex-basis:45%;">
    <h2><a href="https://www.amazon.com/Sega-Genesis-Classic-Game-Console-Gear/dp/B06XWBY3YP">Sega Genesis Classic Game Console</a></h2>
    <div class="fig" style="text-align:center;margin:auto;">
      <img src="./media/sega.jpg" style="width:100%;height:auto;" />
      <span class="caption">Sega Genesis Classic Game Console Image</span>
    </div>
    <ul>
      <li>81 classic Sega games preloaded</li>
      <li>Controlled by controllers</li>
    </ul>
  </div>
</div>

<h1 id="design">Design</h1>

<h2 id="system-architecture">System Architecture</h2>
<div style="display:flex;justify-content:space-between;">
  <div style="flex-basis:45%;">
    <div class="fig" style="text-align:center;margin:auto;">
      <img src="./media/hardware_diagram.jpg" style="width:100%;height:auto;" />
      <span class="caption">Hardware Diagram</span>
    </div>
  </div>
  <div style="flex-basis:45%;">
    <div class="fig" style="text-align:center;margin:auto;">
      <img src="./media/GameSchematic.jpg" style="width:100%;height:auto;" />
      <span class="caption">Game Schematic</span>
    </div>
  </div>
</div>

<h2 id="functional-specification">Functional Specification</h2>
<div class="fig" style="text-align:center;margin:auto;max-width:560px">
  <img src="./media/state_diagram.jpg" style="width:100%;height:auto;" />
  <span class="caption">State Diagram</span>
</div>
<div style="display:inline-block;vertical-align:top;">
  <p>[Content Needed]</p>
</div>

<h2 id="challenges">Challenges</h2>

<h3>Menu Selection</h3>
<p>The biggest issue encountered in this section was an efficient way to display our selection screens without having to either redraw the screens with new cursor position or delete the previous drawn screen with only our current cursor position. This was implemented with the creation of a cursor state and change cursor function. The cursor state calls a function called blinkcursor that will use the current cursor location to access an array with the appropriate screen cursor location. The change cursor function takes the appropriate array for the current screen and increments or resets the current cursor location variable and then uses this update to update the cursor variables. So in general while there is no interrupt from the remote the screen will print and immediately move into the cursor state. In the cursor state it will blink the cursor at the current location. If there is an interrupt from the remote the input is evaluated and depending on the input from the remote it will either change screens or call the change cursor function to move the cursor up or down so when blinkcursor is called again the cursor is in the new location.</p>

<p>There is also an issue that occurred during the recording of our demonstration. The issue being the cursor moving in a cyclic pattern across the current menu selection screen whenever attempting to video the project. The first step in investigation to come to the conclusion it must come from the phone was clicking non-recognised inputs such as the number 8 on the IR remote. As expected this input had no effect on the selection screens. Following this, holding the phone next to the IR circuit and pressing the power button on the Iphone caused the cursor to consistently move down to the next position.  Upon further research the Iphone has a proximity sensor that is always active that is <a href="https://www.moropo.com/post/list-of-all-sensors-available-in-iphone-15#:~:text=Proximity%20Sensors,visibility%20in%20any%20lighting%20condition">for features such as the raise-to-wake feature</a>. This proximity sensor utilizes IR to measure proximity and it seems this interferes with the IR circuit as it is being interpreted as an input. There is currently no fix for the problem but the problem was deduced.</p>

<h3>Maze Movement</h3>
<p>Another Issue encountered during the development of the maze was crafting a collision system. The original collision system implemented, checked if the new location was at a banned location in the maze. A banned location is a location outside the range of the screen or where a maze wall exists. This allowed for the ball to phase through walls. The next implementation checked the 8 positions around the ball and determined banned positions then if the shifted position was one of these positions it would remain at the current location. This would still allow for the ball the phase through walls. The next attempt was to attempt to determine the respect of the ball with the walls around it and place x’s around every location outside the walls so the ball could not move to that position. Then we would update the position then clear all the added x’s. This implementation was never able to work as the x’s were unreliably placed. The final implementation checks every location of the ball that a pixel exists at and makes sure the location of every pixel did not contain an x which indicates a maze or was out of bounds. This was able to prevent the ball from passing through walls in most cases but in tight places or corners it may still occur.</p>

<h3>AWS Connection</h3>
<p>When attempting to utilize the given functions for connecting to the internet, errors would occur due to wrong pin connections. In our pin configuration Pin 2 was used for the data line in the I2C communication but in the given functions, pin 2 was used for an LED during the initialization process. This was fixed by locating the macros for the LEDs in “gpio_if.h” and changing the macro from pin 2 to pin 64. This change allowed for communication between AWS and the board.</p>



<h2 id="future-work">Future Work</h2>
<ul>
  <li>
    <h3>Save State Implementation</h3>
    <p>For further improvements to the device, a save state of the current state and relevant variables would be implemented. The relevant variables required would be to save the current x and y location of the ball, the current maze array, and the current score. AWS would be used to save the state of all these variables using http_post and passing in the variables into the JSON message. Then once saving is done the states then navigate back to the main menu. Then when choosing the maze game it will ask to load the save or play a new game. Loading the game will call http_get() to get the JSON message, This message will then be parsed to obtain the relevant variables and then passing these variables into the mazeGame function. The input that would be mapped to this would be the digit 3 on the remote to keep all the inputs in a similar location on the remote.</p>
  </li>
  <li>
    <h3>Random Maze Generation</h3>
    <p>Another improvement made could be from implementing random maze generation for random mazes. The first step would be to implement another cursor location on the maze difficulty selection screen for “Random.” The next step would be to generate an array with a random maze to be passed into the game function. This would be done using an algorithm to generate minimum spanning trees. Some popular algorithms are Kruskals, Prim’s, and Aldous-Broder. With further research to select the best algorithm this could be used to generate a random maze for the user to navigate.</p>
  </li>
  <li>
    <h3>Random Word Selection in Hangman</h3>
    <p>One final improvement (aside from finishing hangman), would come from the implementation of a random word selection for solo play in hangman. This would be done by adding another selection for hangman rather than directly loading the game when selected. If the random word selection was made then an API would be used to query a database for a random word to be used in hangman. API ninja has a random word generator that can be interfaced with. This would most likely be used to generate a random word for the user.</p>
  </li>
</ul>

<h2 id="finalized-bom">Finalized BOM</h2>
<p>[Content Needed]</p>
</article>
</body>
</html>
</html>
